@page "/matches"
@using GoalKeeper.DataCollector.App.Data
@inject MatchService MatchService

<h1>Match Center</h1>

<button class="btn btn-primary" @onclick="GetMatches">Get Matchday</button>

<input @bind="matchDayInput" type="number" min="1" max="36" />

@if (buttonClicked && matches == null)
{
    <p><em>Loading...</em></p>
}
else if (matches == null){}
else
{
    <table class="table">
        <thead>
            <tr>
                <th>Date</th>
                <th>HomeTeamName</th>
                <th>HomeTeamScore</th>
                <th>AwayTeamName</th>
                <th>AwayTeamScore</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var match in matches)
            {
                <tr>
                    <td>@match.Date.ToShortDateString()</td>
                    <td>@match.HomeTeamName</td>
                    <td>@match.HomeTeamScore</td>
                    <td>@match.AwayTeamName</td>
                    <td>@match.AwayTeamScore</td>
                </tr>
            }
        </tbody>
    </table>
}

@code {
    private Match[]? matches;
    private int matchDayInput { get; set; } = 1;
    private bool buttonClicked = false;

    private async void GetMatches()
    {
        buttonClicked = true;
        matches = await MatchService.GetMatches(matchDayInput);
    }
}
